{
  "openapi": "3.0.0",
  "paths": {
    "/": {
      "get": {
        "operationId": "AppController_getHello",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "App"
        ]
      }
    },
    "/api/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Invalid email or password."
          }
        },
        "summary": "Sign in with email and password",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/register": {
      "post": {
        "operationId": "AuthController_register",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterCompleteRequestDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Registration completed successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid registration data."
          }
        },
        "summary": "Register new student account",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/logout": {
      "post": {
        "operationId": "AuthController_logout",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Logout successful.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LogoutResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid bearer token."
          }
        },
        "security": [
          {
            "supabase-auth": []
          }
        ],
        "summary": "Logout current session (global)",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/forgot-password": {
      "post": {
        "operationId": "AuthController_forgotPassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reset email sent.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForgotPasswordResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid email."
          }
        },
        "summary": "Send a password reset email",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/update-password": {
      "post": {
        "operationId": "AuthController_updatePassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePasswordRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password updated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdatePasswordResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid bearer token."
          }
        },
        "security": [
          {
            "supabase-auth": []
          }
        ],
        "summary": "Update password using current session",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/profile/me": {
      "get": {
        "operationId": "ProfileController_getMe",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Profile loaded.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid bearer token."
          }
        },
        "security": [
          {
            "supabase-auth": []
          }
        ],
        "summary": "Get the authenticated user's profile",
        "tags": [
          "Profile"
        ]
      }
    }
  },
  "info": {
    "title": "My API",
    "description": "The backend API description",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "securitySchemes": {
      "supabase-auth": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http",
        "description": "Enter your Supabase access token"
      }
    },
    "schemas": {
      "LoginRequestDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email address associated with the BackToSchool account.",
            "example": "student@demo.com"
          },
          "password": {
            "type": "string",
            "description": "Account password. Minimum 8 characters.",
            "example": "demo1234",
            "minLength": 8
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "LoginUserDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the authenticated user.",
            "example": "a9f0c2d9-3c8b-4f0d-9ef2-1234567890ab"
          },
          "email": {
            "type": "string",
            "description": "Email address of the authenticated user.",
            "example": "student@demo.com"
          },
          "role": {
            "type": "string",
            "description": "Role of the authenticated user.",
            "example": "student"
          },
          "fullName": {
            "type": "string",
            "description": "Full name of the user.",
            "example": "Ahmad Rahman"
          },
          "phoneNumber": {
            "type": "string",
            "description": "Phone number of the user.",
            "example": "+60 12-345-6789"
          }
        },
        "required": [
          "id",
          "email",
          "role"
        ]
      },
      "StudentProfileDto": {
        "type": "object",
        "properties": {
          "studyLevel": {
            "type": "string",
            "example": "SPM"
          },
          "extracurricular": {
            "type": "boolean",
            "example": true
          },
          "bm": {
            "type": "string",
            "example": "A"
          },
          "english": {
            "type": "string",
            "example": "A"
          },
          "history": {
            "type": "string",
            "example": "B"
          },
          "mathematics": {
            "type": "string",
            "example": "A"
          },
          "islamicEducationMoralEducation": {
            "type": "string",
            "example": "A"
          },
          "physics": {
            "type": "string",
            "example": "A"
          },
          "chemistry": {
            "type": "string",
            "example": "A"
          },
          "biology": {
            "type": "string",
            "example": "B"
          },
          "additionalMathematics": {
            "type": "string",
            "example": "A"
          },
          "geography": {
            "type": "string",
            "example": "0"
          },
          "economics": {
            "type": "string",
            "example": "0"
          },
          "accounting": {
            "type": "string",
            "example": "0"
          },
          "chinese": {
            "type": "string",
            "example": "0"
          },
          "tamil": {
            "type": "string",
            "example": "0"
          },
          "ict": {
            "type": "string",
            "example": "0"
          },
          "mathsInterest": {
            "type": "number",
            "example": 5
          },
          "scienceInterest": {
            "type": "number",
            "example": 5
          },
          "computerInterest": {
            "type": "number",
            "example": 5
          },
          "writingInterest": {
            "type": "number",
            "example": 3
          },
          "artInterest": {
            "type": "number",
            "example": 2
          },
          "businessInterest": {
            "type": "number",
            "example": 3
          },
          "socialInterest": {
            "type": "number",
            "example": 2
          },
          "logicalThinking": {
            "type": "number",
            "example": 5
          },
          "problemSolving": {
            "type": "number",
            "example": 5
          },
          "creativity": {
            "type": "number",
            "example": 4
          },
          "communication": {
            "type": "number",
            "example": 4
          },
          "teamwork": {
            "type": "number",
            "example": 5
          },
          "leadership": {
            "type": "number",
            "example": 3
          },
          "attentionToDetail": {
            "type": "number",
            "example": 5
          }
        }
      },
      "PreferencesDto": {
        "type": "object",
        "properties": {
          "budgetRange": {
            "type": "string",
            "example": "RM 50,000 - RM 100,000"
          },
          "preferredLocation": {
            "type": "string",
            "example": "Kuala Lumpur"
          },
          "preferredCountry": {
            "type": "string",
            "example": "Malaysia"
          },
          "studyMode": {
            "type": "string",
            "example": "Full-time"
          }
        }
      },
      "LoginResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Friendly message describing the login result.",
            "example": "Login successful."
          },
          "user": {
            "$ref": "#/components/schemas/LoginUserDto"
          },
          "profile": {
            "$ref": "#/components/schemas/StudentProfileDto"
          },
          "preferences": {
            "$ref": "#/components/schemas/PreferencesDto"
          },
          "accessToken": {
            "type": "string",
            "description": "Supabase access token for client session.",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "refreshToken": {
            "type": "string",
            "description": "Supabase refresh token for client session.",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "expiresIn": {
            "type": "number",
            "description": "Token expiry in seconds.",
            "example": 3600
          }
        },
        "required": [
          "message",
          "user",
          "accessToken",
          "refreshToken",
          "expiresIn"
        ]
      },
      "RegisterCompleteRequestDto": {
        "type": "object",
        "properties": {
          "fullName": {
            "type": "string",
            "description": "Full name of the user.",
            "example": "Ahmad Rahman"
          },
          "email": {
            "type": "string",
            "description": "User email address. Must be unique and valid format.",
            "example": "ahmad.rahman@email.com"
          },
          "phoneNumber": {
            "type": "string",
            "description": "Contact number with country code.",
            "example": "+60 12-345-6789"
          },
          "currentLocation": {
            "type": "string",
            "description": "Current location string (e.g., city, lat/long). Optional.",
            "example": "Kuala Lumpur, MY"
          },
          "password": {
            "type": "string",
            "description": "Account password. Minimum 8 characters, must contain uppercase, number, and special character. Cannot contain email.",
            "example": "StrongPass123!",
            "minLength": 8
          },
          "confirmPassword": {
            "type": "string",
            "description": "Confirm password. Must match password.",
            "example": "StrongPass123!"
          },
          "studyLevel": {
            "type": "string",
            "description": "Study level. Must be SPM or STPM.",
            "enum": [
              "SPM",
              "STPM"
            ],
            "example": "SPM"
          },
          "extracurricular": {
            "type": "boolean",
            "description": "Extracurricular participation.",
            "example": true
          },
          "bm": {
            "type": "string",
            "description": "Bahasa Malaysia grade. Must be A, B, C, D, E, G, or 0 (not taken).",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "A"
          },
          "english": {
            "type": "string",
            "description": "English grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "A"
          },
          "history": {
            "type": "string",
            "description": "History grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "B"
          },
          "mathematics": {
            "type": "string",
            "description": "Mathematics grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "A"
          },
          "islamicEducationMoralEducation": {
            "type": "string",
            "description": "Islamic Education / Moral Education grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "A"
          },
          "physics": {
            "type": "string",
            "description": "Physics grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "A"
          },
          "chemistry": {
            "type": "string",
            "description": "Chemistry grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "A"
          },
          "biology": {
            "type": "string",
            "description": "Biology grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "B"
          },
          "additionalMathematics": {
            "type": "string",
            "description": "Additional Mathematics grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "A"
          },
          "geography": {
            "type": "string",
            "description": "Geography grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "0"
          },
          "economics": {
            "type": "string",
            "description": "Economics grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "0"
          },
          "accounting": {
            "type": "string",
            "description": "Accounting grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "0"
          },
          "chinese": {
            "type": "string",
            "description": "Chinese grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "0"
          },
          "tamil": {
            "type": "string",
            "description": "Tamil grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "0"
          },
          "ict": {
            "type": "string",
            "description": "ICT grade.",
            "enum": [
              "A",
              "B",
              "C",
              "D",
              "E",
              "G",
              "0"
            ],
            "example": "0"
          },
          "mathsInterest": {
            "type": "number",
            "description": "Interest in mathematics (1-5). Must be integer between 1 and 5.",
            "example": 5,
            "minimum": 1,
            "maximum": 5
          },
          "scienceInterest": {
            "type": "number",
            "description": "Interest in science (1-5). Must be integer between 1 and 5.",
            "example": 5,
            "minimum": 1,
            "maximum": 5
          },
          "computerInterest": {
            "type": "number",
            "description": "Interest in computers/IT (1-5). Must be integer between 1 and 5.",
            "example": 5,
            "minimum": 1,
            "maximum": 5
          },
          "writingInterest": {
            "type": "number",
            "description": "Interest in writing (1-5). Must be integer between 1 and 5.",
            "example": 3,
            "minimum": 1,
            "maximum": 5
          },
          "artInterest": {
            "type": "number",
            "description": "Interest in arts (1-5). Must be integer between 1 and 5.",
            "example": 2,
            "minimum": 1,
            "maximum": 5
          },
          "businessInterest": {
            "type": "number",
            "description": "Interest in business (1-5). Must be integer between 1 and 5.",
            "example": 3,
            "minimum": 1,
            "maximum": 5
          },
          "socialInterest": {
            "type": "number",
            "description": "Interest in social sciences (1-5). Must be integer between 1 and 5.",
            "example": 2,
            "minimum": 1,
            "maximum": 5
          },
          "logicalThinking": {
            "type": "number",
            "description": "Logical thinking skill (1-5). Must be integer between 1 and 5.",
            "example": 5,
            "minimum": 1,
            "maximum": 5
          },
          "problemSolving": {
            "type": "number",
            "description": "Problem-solving skill (1-5). Must be integer between 1 and 5.",
            "example": 5,
            "minimum": 1,
            "maximum": 5
          },
          "creativity": {
            "type": "number",
            "description": "Creativity skill (1-5). Must be integer between 1 and 5.",
            "example": 4,
            "minimum": 1,
            "maximum": 5
          },
          "communication": {
            "type": "number",
            "description": "Communication skill (1-5). Must be integer between 1 and 5.",
            "example": 4,
            "minimum": 1,
            "maximum": 5
          },
          "teamwork": {
            "type": "number",
            "description": "Teamwork skill (1-5). Must be integer between 1 and 5.",
            "example": 5,
            "minimum": 1,
            "maximum": 5
          },
          "leadership": {
            "type": "number",
            "description": "Leadership skill (1-5). Must be integer between 1 and 5.",
            "example": 3,
            "minimum": 1,
            "maximum": 5
          },
          "attentionToDetail": {
            "type": "number",
            "description": "Attention to detail skill (1-5). Must be integer between 1 and 5.",
            "example": 5,
            "minimum": 1,
            "maximum": 5
          },
          "budgetRange": {
            "type": "string",
            "description": "Budget range preference.",
            "example": "RM 50,000 - RM 100,000"
          },
          "preferredLocation": {
            "type": "string",
            "description": "Preferred study location.",
            "example": "Kuala Lumpur"
          },
          "preferredCountry": {
            "type": "string",
            "description": "Preferred country (optional).",
            "example": "Malaysia"
          },
          "studyMode": {
            "type": "string",
            "description": "Study mode preference (optional).",
            "example": "Full-time"
          }
        },
        "required": [
          "fullName",
          "email",
          "phoneNumber",
          "password",
          "confirmPassword",
          "studyLevel",
          "extracurricular",
          "bm",
          "english",
          "history",
          "mathematics",
          "islamicEducationMoralEducation",
          "physics",
          "chemistry",
          "biology",
          "additionalMathematics",
          "geography",
          "economics",
          "accounting",
          "chinese",
          "tamil",
          "ict",
          "mathsInterest",
          "scienceInterest",
          "computerInterest",
          "writingInterest",
          "artInterest",
          "businessInterest",
          "socialInterest",
          "logicalThinking",
          "problemSolving",
          "creativity",
          "communication",
          "teamwork",
          "leadership",
          "attentionToDetail",
          "budgetRange",
          "preferredLocation"
        ]
      },
      "RegisterResponseDto": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "description": "Identifier of the newly created user.",
            "example": "a9f0c2d9-3c8b-4f0d-9ef2-1234567890ab"
          },
          "email": {
            "type": "string",
            "description": "Registered email address.",
            "example": "ahmad.rahman@email.com"
          },
          "message": {
            "type": "string",
            "description": "Status message returned after registration.",
            "example": "Account created successfully. Please verify your email."
          }
        },
        "required": [
          "userId",
          "email",
          "message"
        ]
      },
      "LogoutResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Status message returned after logout.",
            "example": "Logout successful."
          }
        },
        "required": [
          "message"
        ]
      },
      "ForgotPasswordRequestDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email address to receive the reset link."
          },
          "redirectTo": {
            "type": "string",
            "description": "Redirect URL after clicking the email reset link.",
            "example": "http://localhost:3000/"
          }
        },
        "required": [
          "email"
        ]
      },
      "ForgotPasswordResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Status message.",
            "example": "Password reset email sent."
          }
        },
        "required": [
          "message"
        ]
      },
      "UpdatePasswordRequestDto": {
        "type": "object",
        "properties": {
          "password": {
            "type": "string",
            "description": "New password to set.",
            "minLength": 8
          }
        },
        "required": [
          "password"
        ]
      },
      "UpdatePasswordResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Status message.",
            "example": "Password updated successfully."
          }
        },
        "required": [
          "message"
        ]
      },
      "ProfileResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "firstName": {
            "type": "object",
            "nullable": true
          },
          "lastName": {
            "type": "object",
            "nullable": true
          },
          "phoneNumber": {
            "type": "object",
            "nullable": true
          },
          "nationality": {
            "type": "object",
            "nullable": true
          },
          "currentLocation": {
            "type": "object",
            "nullable": true
          },
          "avatarUrl": {
            "type": "object",
            "nullable": true
          },
          "careerGoal": {
            "type": "object",
            "nullable": true
          },
          "educationLevel": {
            "type": "object",
            "nullable": true
          },
          "fieldOfInterestId": {
            "type": "object",
            "nullable": true
          },
          "academicResult": {
            "type": "object",
            "nullable": true
          },
          "studyPreferences": {
            "type": "object",
            "nullable": true
          }
        },
        "required": [
          "id",
          "email",
          "firstName",
          "lastName",
          "phoneNumber",
          "nationality",
          "currentLocation",
          "avatarUrl",
          "careerGoal",
          "educationLevel",
          "fieldOfInterestId",
          "academicResult",
          "studyPreferences"
        ]
      }
    }
  }
}