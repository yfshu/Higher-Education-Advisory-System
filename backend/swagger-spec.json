{
  "openapi": "3.0.0",
  "paths": {
    "/": {
      "get": {
        "operationId": "AppController_getHello",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "App"
        ]
      }
    },
    "/api/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Invalid email or password."
          }
        },
        "summary": "Sign in with email and password",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/register": {
      "post": {
        "operationId": "AuthController_register",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequestDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Account created successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid registration payload."
          }
        },
        "summary": "Create a new student account",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/logout": {
      "post": {
        "operationId": "AuthController_logout",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Logout successful.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LogoutResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid bearer token."
          }
        },
        "security": [
          {
            "supabase-auth": []
          }
        ],
        "summary": "Logout current session (global)",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/forgot-password": {
      "post": {
        "operationId": "AuthController_forgotPassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reset email sent.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForgotPasswordResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid email."
          }
        },
        "summary": "Send a password reset email",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/update-password": {
      "post": {
        "operationId": "AuthController_updatePassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePasswordRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password updated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdatePasswordResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid bearer token."
          }
        },
        "security": [
          {
            "supabase-auth": []
          }
        ],
        "summary": "Update password using current session",
        "tags": [
          "Auth"
        ]
      }
    }
  },
  "info": {
    "title": "My API",
    "description": "The backend API description",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "securitySchemes": {
      "supabase-auth": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http",
        "description": "Enter your Supabase access token"
      }
    },
    "schemas": {
      "LoginRequestDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email address associated with the BackToSchool account.",
            "example": "student@demo.com"
          },
          "password": {
            "type": "string",
            "description": "Account password. Minimum 8 characters.",
            "example": "demo1234",
            "minLength": 8
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "LoginUserDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the authenticated user.",
            "example": "a9f0c2d9-3c8b-4f0d-9ef2-1234567890ab"
          },
          "email": {
            "type": "string",
            "description": "Email address of the authenticated user.",
            "example": "student@demo.com"
          },
          "role": {
            "type": "string",
            "description": "Role of the authenticated user.",
            "example": "student"
          }
        },
        "required": [
          "id",
          "email",
          "role"
        ]
      },
      "LoginResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Friendly message describing the login result.",
            "example": "Login successful."
          },
          "user": {
            "$ref": "#/components/schemas/LoginUserDto"
          },
          "accessToken": {
            "type": "string",
            "description": "Supabase access token for client session.",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "refreshToken": {
            "type": "string",
            "description": "Supabase refresh token for client session.",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "expiresIn": {
            "type": "number",
            "description": "Token expiry in seconds.",
            "example": 3600
          }
        },
        "required": [
          "message",
          "user",
          "accessToken",
          "refreshToken",
          "expiresIn"
        ]
      },
      "RegisterRequestDto": {
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "description": "Student first name.",
            "example": "Ahmad"
          },
          "lastName": {
            "type": "string",
            "description": "Student last name.",
            "example": "Rahman"
          },
          "email": {
            "type": "string",
            "description": "Student email address.",
            "example": "ahmad.rahman@email.com"
          },
          "phoneNumber": {
            "type": "string",
            "description": "Contact number with country code.",
            "example": "+60 12-345-6789"
          },
          "identityType": {
            "type": "string",
            "description": "Identity document type.",
            "example": "ic",
            "enum": [
              "ic",
              "passport"
            ]
          },
          "identityNumber": {
            "type": "string",
            "description": "Identity document number. Accepts IC or passport number based on the selected type.",
            "example": "000515-12-1234"
          },
          "dob": {
            "type": "string",
            "description": "Date of birth (ISO 8601).",
            "example": "2000-05-15"
          },
          "nationality": {
            "type": "string",
            "description": "Nationality.",
            "example": "Malaysian"
          },
          "currentLocation": {
            "type": "string",
            "description": "Current residence location.",
            "example": "Kuala Lumpur, Malaysia"
          },
          "avatarUrl": {
            "type": "string",
            "description": "Avatar image URL.",
            "example": "https://example.com/avatar.png"
          },
          "password": {
            "type": "string",
            "description": "Account password. Minimum 8 characters.",
            "example": "StrongPass123!",
            "minLength": 8
          },
          "confirmPassword": {
            "type": "string",
            "description": "Confirm password. Must match password.",
            "example": "StrongPass123!"
          },
          "educationLevel": {
            "type": "string",
            "description": "Highest education level attained.",
            "enum": [
              "SPM",
              "STPM",
              "A-Levels",
              "Foundation",
              "Diploma",
              "Bachelor",
              "Master",
              "Other"
            ],
            "example": "SPM"
          },
          "currentInstitution": {
            "type": "string",
            "description": "Name of the current institution.",
            "example": "SMK Kuala Lumpur"
          },
          "fieldOfInterestId": {
            "type": "number",
            "description": "Selected field of interest identifier.",
            "example": 3
          },
          "academicResult": {
            "type": "string",
            "description": "Academic results summary.",
            "example": "CGPA 3.75, 8A+ in SPM"
          },
          "studyPreferences": {
            "type": "string",
            "description": "Preferred study preferences such as location, study mode, or university type.",
            "example": "Prefer Klang Valley universities with strong internship programmes."
          },
          "careerGoal": {
            "type": "string",
            "description": "Student career goal.",
            "example": "Software developer in a Malaysian tech company"
          }
        },
        "required": [
          "firstName",
          "lastName",
          "email",
          "identityType",
          "identityNumber",
          "password",
          "confirmPassword"
        ]
      },
      "RegisterResponseDto": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "description": "Identifier of the newly created user.",
            "example": "a9f0c2d9-3c8b-4f0d-9ef2-1234567890ab"
          },
          "email": {
            "type": "string",
            "description": "Registered email address.",
            "example": "ahmad.rahman@email.com"
          },
          "message": {
            "type": "string",
            "description": "Status message returned after registration.",
            "example": "Account created successfully. Please verify your email."
          }
        },
        "required": [
          "userId",
          "email",
          "message"
        ]
      },
      "LogoutResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Status message returned after logout.",
            "example": "Logout successful."
          }
        },
        "required": [
          "message"
        ]
      },
      "ForgotPasswordRequestDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email address to receive the reset link."
          },
          "redirectTo": {
            "type": "string",
            "description": "Redirect URL after clicking the email reset link.",
            "example": "http://localhost:3000/"
          }
        },
        "required": [
          "email"
        ]
      },
      "ForgotPasswordResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Status message.",
            "example": "Password reset email sent."
          }
        },
        "required": [
          "message"
        ]
      },
      "UpdatePasswordRequestDto": {
        "type": "object",
        "properties": {
          "password": {
            "type": "string",
            "description": "New password to set.",
            "minLength": 8
          }
        },
        "required": [
          "password"
        ]
      },
      "UpdatePasswordResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Status message.",
            "example": "Password updated successfully."
          }
        },
        "required": [
          "message"
        ]
      }
    }
  }
}